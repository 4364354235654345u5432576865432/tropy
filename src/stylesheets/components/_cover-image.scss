//
// Cover image
// --------------------------------------------------

$background-dark: #777;
$background-light: #999;
$white: #fff;

.cover-image {
  box-sizing: content-box;
  position: relative;
}

.stack-lines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  background: $stack-bg;
  z-index: 1;

  .line {
    background: $stack-color;
    border-bottom: 1px solid $stack-color;
    position: relative;

    $i: $tile-thumbnail-size-min;

    @while $i <= $tile-thumbnail-size-max {
      [data-size="#{$i}"] & {
        $percentage: percentage(1);

        @if $i < ($tile-thumbnail-size-max / 2) {
          $percentage: percentage(($i * 2 / $tile-thumbnail-size-max));
        }

        height: #{round($i / 32)}px;

        @for $j from 1 through $stack-size-max {
          &.line-#{$j} {
            margin-left: #{round($i * $j / 16)}px;
            margin-right: #{round($i * $j / 16)}px;

            border-bottom-color: mix($background-dark, $white, $percentage);
          }
        }

        &.line-2 {
          background: mix($background-light, $background-dark, $percentage);
          border-bottom-color: mix($background-light, $white, $percentage);
        }
      }

      $i: $i + $tile-size-step-min;
    }
  }
}

.item-table {
  .cover-image {
    position: absolute;
    left: $component-padding-horizontal;
    top: ($row-height - $thumbnail-size) / 2;

    .stack-lines {
      background: transparent;

      .line {
        height: 1px;
      }

      @for $i from 1 through $stack-size-max {
        .line-#{$i} {
          margin-left: $i * 2px;
          margin-right: $i * 2px;
        }
      }

      & + .thumbnail {
        -webkit-clip-path: inset(4px 0 0 0);

        .icon-photo {
          g {
            transform: translateY(2px);
          }
        }
      }
    }
  }

  &:focus {
    .active {
      .cover-image {
        .line {
          background: $stack-focus-color;
        }
      }
    }
  }
}
